// Generated by CoffeeScript 1.8.0
(function() {
  var Chart, Serie, start,
    __slice = [].slice;

  Chart = (function() {
    function Chart() {
      var id, series, title;
      id = arguments[0], title = arguments[1], series = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
      this.id = id;
      this.title = title;
      this.series = series;
    }

    Chart.prototype.getChartData = function() {
      return {
        chartData: {
          title: this.title
        },
        series: this.series
      };
    };

    Chart.prototype.draw = function() {
      return $("#" + this.id).highcharts(this.getChartData());
    };

    return Chart;

  })();

  Serie = (function() {
    function Serie(computer, disk, test, layout) {
      this.computer = computer;
      this.disk = disk;
      this.test = test;
      this.layout = layout;
      this.query();
      this.formatData();
    }

    Serie.prototype.query = function() {
      $.ajaxSetup({
        async: false
      });
      return this.rawData = $.getJSON("../results/" + this.computer + "-" + this.disk + "-" + this.test + "-" + this.layout + ".json").responseJSON;
    };

    Serie.prototype.formatData = function() {
      var d, _i, _len, _ref, _results;
      this.data = [];
      if (this.rawData.measurements.length === 1) {
        this.data.push([0, this.rawData.measurements[0].duration / 1000000000]);
      }
      _ref = this.rawData.measurements;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        d = _ref[_i];
        _results.push(this.data.push([d.size / 1024, d.duration / 1000000000]));
      }
      return _results;
    };

    Serie.prototype.get = function() {
      return {
        data: this.data,
        name: this.test
      };
    };

    return Serie;

  })();

  start = function() {
    var a, c, s;
    s = new Serie("centaurus", "sdf", "FullTableScan", "unordered-16kb-Page");
    a = new Serie("centaurus", "sdf", "RawIndexScan", "unordered-16kb-Page");
    console.log(s.get());
    c = new Chart("c1", "abc", s, a);
    return c.draw();
  };

  $(document).ready(start);

}).call(this);
